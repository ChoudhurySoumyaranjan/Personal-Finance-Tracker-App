<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <title>Transaction History</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="/style.css">
</head>
<body class="bg-light">

<header th:replace="~{fragments/header :: header}">
</header>

<div class="container mt-4 container-fluid">

    <h3 class="mb-4">ðŸ“œ Transaction History</h3>

    <form method="get" class="row g-3 mb-4">
        <div class="col-md-3">
            <input type="date" name="startDate" class="form-control"
                   th:value="${startDate}">
        </div>
        <div class="col-md-3">
            <input type="date" name="endDate" class="form-control"
                   th:value="${endDate}">
        </div>
        <div class="col-md-4">
            <select name="keyword" class="form-select">
                <option value="" disabled selected>Categories</option>
                <option th:each="c : ${categories}"
                        th:value="${c}"
                        th:text="${c}"
                        th:selected="${c == keyword}">
                </option>
            </select>

        </div>
        <div class="col-md-2">
            <button class="btn btn-primary w-100">Filter</button>
        </div>
    </form>

    <!-- TABLE -->
    <table class="table table-hover align-middle">
        <thead class="table-light">
        <tr>
            <th>Date</th>
            <th>Type</th>
            <th>Category</th>
            <th class="text-end">Amount</th>
            <th>Description</th>
        </tr>
        </thead>

        <tbody>
        <tr th:if="${transactions.isEmpty()}">
            <td colspan="5" class="text-center text-muted">
                No transactions found
            </td>
        </tr>

        <tr th:each="t : ${transactions}">
            <td th:text="${t.date}"></td>
            <td>
                <span th:class="${t.type == 'INCOME'} ? 'badge bg-success' : 'badge bg-danger'"
                      th:text="${t.type}"></span>
            </td>
            <td th:text="${t.category}"></td>
            <td class="text-end"
                th:text="${#numbers.formatDecimal(t.amount,1,2)}"></td>
            <td th:text="${t.description}"></td>
        </tr>
        </tbody>
    </table>
</div>
<footer th:replace="~{fragments/footer :: footer}">
</footer>
</body>
</html>
