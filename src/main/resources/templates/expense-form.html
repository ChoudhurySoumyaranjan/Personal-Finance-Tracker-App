<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Add/Edit Expense</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" th:href="@{/style.css}">
</head>
<body>
<header th:replace="~{fragments/header :: header}"></header>

<div class="expense-container">
    <div class="expense-card">
        <div class="expense-header text-white">
            <h1 class="mb-0" th:if="${expense.id == null}">Add New Expense <i class="bi bi-plus-circle ms-2"></i></h1>
            <h1 class="mb-0" th:unless="${expense.id == null}">Edit Expense <i class="bi bi-pencil-square ms-2"></i></h1>
        </div>
        <div class="expense-body">
            <form th:action="${expense.id == null} ? @{/expenses/add} : @{/expenses/edit/{id}(id=${expense.id})}" th:object="${expense}" method="post">
                <div class="expense-form-group">
                    <label for="amount" class="form-label">Amount (â‚¹): <i class="bi bi-currency-rupee"></i></label>
                    <input type="number" class="form-control" id="amount" th:field="*{amount}" step="0.01" required placeholder="Enter amount, e.g., 150.50" />
                    <span th:if="${#fields.hasErrors('amount')}" th:errors="*{amount}" class="expense-error"></span>
                </div>

                <div class="expense-form-group">
                    <label for="category" class="form-label">Category: <i class="bi bi-tags"></i></label>
                    <select class="form-select" id="category" th:field="*{category}" required>
                        <option value="">Select Category</option>
                        <option th:each="cat : ${categories}" th:value="${cat}" th:text="${cat}"></option>
                    </select>
                    <span th:if="${#fields.hasErrors('category')}" th:errors="*{category}" class="expense-error"></span>
                </div>

                <div class="expense-form-group">
                    <label for="date" class="form-label">Date: <i class="bi bi-calendar-event"></i></label>
                    <input type="date" class="form-control" id="date" th:field="*{date}" required />
                    <span th:if="${#fields.hasErrors('date')}" th:errors="*{date}" class="expense-error"></span>
                </div>

                <div class="expense-form-group">
                    <label for="description" class="form-label">Description (Optional): <i class="bi bi-text-paragraph"></i></label>
                    <textarea class="form-control expense-textarea" id="description" th:field="*{description}" rows="4" placeholder="Add notes about the expense..."></textarea>
                </div>

                <div class="expense-actions">
                    <button type="submit" class="btn btn-success expense-btn-save"><i class="bi bi-save me-2"></i>Save</button>
                    <a th:href="@{/expenses}" class="btn btn-secondary expense-btn-cancel"><i class="bi bi-x-circle me-2"></i>Cancel</a>
                </div>
            </form>
        </div>
    </div>
</div>

<footer th:replace="~{fragments/footer :: footer}"></footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>